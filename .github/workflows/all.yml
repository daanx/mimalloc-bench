name: Build and run everything
on:
  push:
  pull_request:
  schedule:
    - cron: '0 0 * * 1'
jobs:
  build-and-run:
    strategy:
      matrix:
        platform: [ubuntu, alpine, fedora]
        exclude:
          # Fedora is not currently building lean.
          - platform: fedora
      fail-fast: false
    uses: ./.github/workflows/platform.yml
    name: ${{ matrix.platform }}
    with:
      platform: ${{ matrix.platform }}